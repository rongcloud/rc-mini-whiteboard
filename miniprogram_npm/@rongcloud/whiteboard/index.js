module.exports = (function() {
var __MODS__ = {};
var __DEFINE__ = function(modId, func, req) { var m = { exports: {}, _tempexports: {} }; __MODS__[modId] = { status: 0, func: func, req: req, m: m }; };
var __REQUIRE__ = function(modId, source) { if(!__MODS__[modId]) return require(source); if(!__MODS__[modId].status) { var m = __MODS__[modId].m; m._exports = m._tempexports; var desp = Object.getOwnPropertyDescriptor(m, "exports"); if (desp && desp.configurable) Object.defineProperty(m, "exports", { set: function (val) { if(typeof val === "object" && val !== m._exports) { m._exports.__proto__ = val.__proto__; Object.keys(val).forEach(function (k) { m._exports[k] = val[k]; }); } m._tempexports = val }, get: function () { return m._tempexports; } }); __MODS__[modId].status = 1; __MODS__[modId].func(__MODS__[modId].req, m, m.exports); } return __MODS__[modId].m.exports; };
var __REQUIRE_WILDCARD__ = function(obj) { if(obj && obj.__esModule) { return obj; } else { var newObj = {}; if(obj != null) { for(var k in obj) { if (Object.prototype.hasOwnProperty.call(obj, k)) newObj[k] = obj[k]; } } newObj.default = obj; return newObj; } };
var __REQUIRE_DEFAULT__ = function(obj) { return obj && obj.__esModule ? obj.default : obj; };
__DEFINE__(1637044131431, function(require, module, exports) {
Object.defineProperty(exports,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))}function r(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function o(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}var a={appkey:"",navigators:[],useHttp:!1,token:"",id:"",role:"",hubId:"",nickName:""},i=["http://nav-ucqa.rongcloud.net","https://nav.cn.ronghub.com"],u=function(e,t){if(e=e.replace(/\?$/,""),!t)return e;var n=Object.keys(t).map((function(e){return e+"="+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join("&")].join("?"):e};function s(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){n+=t[Math.ceil(30*Math.random())]}return n}var c=function(e){return["navi",e].join("_")};function R(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(e){return!1}return!1}var d,l,p=function(e){return!!(e&&e.canIUse&&e.getSystemInfo)},f=function(e){var t=document.createElement("iframe");return t.style.width="100%",t.style.height="100%",t.style.border="none",t.src=e,t},E=function(e){var t=a.useHttp?"http":"https";return/^http(s)?:/.test(e)?e:t+"://"+e},O=function(e){return"string"==typeof e},S=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")},_=function(e){return"[object Object]"===Object.prototype.toString.call(e)},v=function(e){return"[object Function]"===Object.prototype.toString.call(e)},m=function(e){return O(e)&&/https?:\/\//.test(e)};!function(e){e[e.STRING=0]="STRING",e[e.ONLY_STRING=1]="ONLY_STRING",e[e.NUMBER=2]="NUMBER",e[e.BOOLEAN=3]="BOOLEAN",e[e.OBJECT=4]="OBJECT",e[e.ARRAY=5]="ARRAY",e[e.CALLBACK=6]="CALLBACK"}(l||(l={}));var h,y,g,T,I=((d={})[l.STRING]=function(e){return O(e)&&e.length>0},d[l.ONLY_STRING]=O,d[l.NUMBER]=function(e){return"number"==typeof e&&!isNaN(e)},d[l.BOOLEAN]=function(e){return"boolean"==typeof e},d[l.OBJECT]=_,d[l.ARRAY]=S,d[l.CALLBACK]=function(e){var t=!0;return _(e)||(t=!1),(e=e||{}).onSuccess&&!v(e.onSuccess)&&(t=!1),e.onError&&!v(e.onError)&&(t=!1),t},d),N=function(t){function n(e){var n=t.call(this,e)||this;return n.name="WBAssertError",n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error),C=function(e,t,n,r){if(void 0===r&&(r=!1),!w(e,t,n,r))throw new N("'"+e+"' is invalid: "+JSON.stringify(t))},w=function(e,t,n,r){void 0===r&&(r=!1),n=I[n]||n;var o,a=r&&!n(t)||!r&&!(void 0===(o=t)||"[object Undefined]"===Object.prototype.toString.call(o)||null===t||n(t));return a&&console.error("'"+e+"' is invalid: "+JSON.stringify(t)),!a};!function(e){e[e.SUCCESS=200]="SUCCESS",e[e.LESSHOLDER_SUCCESS=0]="LESSHOLDER_SUCCESS",e[e.UNKNOWN=1]="UNKNOWN",e[e.SERVER_PARAMETER_ERROR=100001]="SERVER_PARAMETER_ERROR",e[e.APP_KEY_ERROR=100007]="APP_KEY_ERROR",e[e.APP_TOKEN_ISNULL=100008]="APP_TOKEN_ISNULL",e[e.APP_KEY_ISNULL=100009]="APP_KEY_ISNULL",e[e.TOKEN_ERROR=100010]="TOKEN_ERROR",e[e.WHITEBOARD_SERVICE_UNAVAILABLE=100011]="WHITEBOARD_SERVICE_UNAVAILABLE",e[e.WHITEBOARD_FILE_UNAVAILABLE=100017]="WHITEBOARD_FILE_UNAVAILABLE",e[e.NOT_INIT=300001]="NOT_INIT",e[e.CLIENT_PARAMETER_ERROR=300002]="CLIENT_PARAMETER_ERROR",e[e.NAVI_RESOURCE_ERROR=300003]="NAVI_RESOURCE_ERROR",e[e.NAVI_RESOURCE_RETURN_ERROR=300004]="NAVI_RESOURCE_RETURN_ERROR",e[e.JOIN_ROOM_ERROR=300005]="JOIN_ROOM_ERROR",e[e.JOIN_ROOM_OPERATE_ERROR=300006]="JOIN_ROOM_OPERATE_ERROR",e[e.PLAY_RECORD_ERROR=300007]="PLAY_RECORD_ERROR",e[e.PLAY_RECORD_OPERATE_ERROR=300008]="PLAY_RECORD_OPERATE_ERROR",e[e.QUIT_ROOM_ERROR=300009]="QUIT_ROOM_ERROR",e[e.QUIT_ROOM_OPERATE_ERROR=300010]="QUIT_ROOM_OPERATE_ERROR",e[e.RC_HTTP_REQ_TIMEOUT=310001]="RC_HTTP_REQ_TIMEOUT"}(h||(h={})),function(e){e.AMDIN="presenter",e.VIEWER="viewer",e.RECORD="record"}(y||(y={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT"}(g||(g={})),function(e){e.onRecordStart="onRecordStart",e.onRecordEnd="onRecordEnd",e.onStatusChange="onStatusChange",e.onRoomQuited="onRoomQuited",e.onRoomException="onRoomException",e.onLoadStart="onLoadStart",e.onLoadEnd="onLoadEnd",e.onCaptureEnd="onCaptureEnd"}(T||(T={}));var b=t(t(t({},{NOT_INIT:{code:300001,msg:"在使用 SDK 任何功能之前，必须先 Init"},CLIENT_PARAMETER_ERROR:{code:300002,msg:"请检查接口调用时传入的参数类型和值"},NAVI_RESOURCE_ERROR:{code:300003,msg:"导航 HTTP 请求失败"},NAVI_RESOURCE_RETURN_ERROR:{code:300004,msg:"导航 HTTP 请求返回数据格式错误"},JOIN_ROOM_ERROR:{code:300005,msg:"加入白板 HTTP 请求失败"},JOIN_ROOM_OPERATE_ERROR:{code:300006,msg:"加入白板操作失败，请检测传参"},PLAY_RECORD_ERROR:{code:300007,msg:"播放录像 HTTP 请求失败"},PLAY_RECORD_OPERATE_ERROR:{code:300008,msg:"播放录像操作失败，请检测传参"},QUIT_ROOM_ERROR:{code:300009,msg:"退出白板 HTTP 请求失败"},QUIT_ROOM_OPERATE_ERROR:{code:300010,msg:"必须先加入白板再执行退出操作,请检查您的业务调用"}}),{UNKNOWN:{code:1,msg:"未知错误"},SERVER_PARAMETER_ERROR:{code:100001,msg:"参数错误"},APP_KEY_ERROR:{code:100007,msg:"appKey 错误"},APP_TOKEN_ISNULL:{code:100008,msg:"appToken 不能为空"},APP_KEY_ISNULL:{code:100009,msg:"appKey 不能为空"},TOKEN_ERROR:{code:100010,msg:"token 错误，请检查 appkey 和 token 一致性"},WHITEBOARD_SERVICE_UNAVAILABLE:{code:100011,msg:"白板服务未开通"},WHITEBOARD_FILE_UNAVAILABLE:{code:100017,msg:"融云文件服务异常"}}),{RC_HTTP_REQ_TIMEOUT:{code:310001,msg:"HTTP 请求失败"}}),U={},A={};for(var P in b){var L=b[P],k=L.code;U[k]=P,A[k]=L}var M=function(e,t){return n(void 0,void 0,void 0,(function(){var n,o,i,u,s,c,d,p,f,E,O,S,_,v,m,y,g;return r(this,(function(r){switch(r.label){case 0:return C("hubId",a.hubId,l.STRING|l.NUMBER),C("appkey",a.appkey,l.STRING),C("token",a.token,l.STRING),n={hubId:(t=t||{}).hubId||a.hubId,applyId:t.applyId||a.id||"123",applyName:t.applyName||a.nickName||"test",reason:t.reason||"nothing"},o=a.iwbLeaseUri,i=a.token,u=a.appkey,s=a.useHttp,c=s?"http":"https",d=/^https?:/.test(o)?o:c+"://"+o,p=d+"/api/v1/iwb/free/",f={"RC-Token":t.token||i,"RC-AppKey":t.appkey||u},[4,e.httpReq({url:p,method:"PUT",headers:f,body:JSON.stringify(n)})];case 1:return E=r.sent(),O=E.status,S=E.data,O!==h.SUCCESS?[2,b.RC_HTTP_REQ_TIMEOUT]:(_=R(S)?JSON.parse(S):S,v=_.code,m=_.data,y=_.desc,g=void 0===y?"Network Error":y,v===h.LESSHOLDER_SUCCESS?[2,{code:h.SUCCESS,msg:"房间关闭成功"}]:[2,A[v]||{code:v,msg:g||m}])}}))}))},H=function(e,o){return n(void 0,void 0,void 0,(function(){var n,i,u,c,d,l,p,f,O,S,_,v,m,y,g,T,I;return r(this,(function(r){switch(r.label){case 0:return o.nickName=o.nickName||"白板"+s(2),n=o.role,i=o.nickName,u=o.id,c=o.activeSeconds,d=void 0===c?180:c,l=o.hubName,p=void 0===l?"":l,f=o.minutes,!u||!o.hubId||!o.token||!o.role||f&&(f<0||f>1e5)?[2,{code:h.JOIN_ROOM_OPERATE_ERROR}]:(O=t(t({minutes:1440},o),{outTradeNo:s(10),ownerId:u,ownerName:i,name:p,fileName:s(6),activeSeconds:d,user:{name:i,uid:u,role:n}}),S=a.iwbLeaseUri,_=a.token,v=a.appkey,m=a.hubId,y=E(S+"/api/v1/iwb/join/"+m),g={"RC-Token":_,"RC-AppKey":v},[4,e.httpReq({url:y,method:"POST",headers:g,body:JSON.stringify(O)})]);case 1:return(T=r.sent().data)?(I=R(T)?JSON.parse(T):T).code===h.LESSHOLDER_SUCCESS?[2,{code:h.SUCCESS,keyInfo:I}]:I.code&&U[I.code]?[2,{code:I.code}]:[2,{code:h.JOIN_ROOM_ERROR}]:[2,{code:h.JOIN_ROOM_ERROR}]}}))}))},j=function(e,o,a){return void 0===a&&(a=[]),n(void 0,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:return(n=function(e,t){var n,r=c(e);try{var o=t.getItem(r);n=o?JSON.parse(o):[]}catch(e){n={}}return Date.now()-n.timestamp<72e5?n:null}(o,e.localStorage))&&n.iwbLeaseUri&&n.iwbConferenceUri?[2,{code:h.SUCCESS,naviInfo:n}]:[4,B(e,a)];case 1:return!(n=r.sent())||n.iwbLeaseUri&&n.iwbConferenceUri?n&&n.iwbLeaseUri&&n.iwbConferenceUri?(function(e,n,r){var o=c(e),a=Date.now(),i=t({timestamp:a},n);r.setItem(o,JSON.stringify(i))}(o,n,e.localStorage),[2,{code:h.SUCCESS,naviInfo:n}]):[2,{code:h.NAVI_RESOURCE_ERROR}]:[2,{code:h.NAVI_RESOURCE_RETURN_ERROR}]}}))}))};function B(e,t){return n(this,void 0,void 0,(function(){var n,i,u,s,c,d,l,p,f,E,O,S,_,v,m,y,g,T,I,N;return r(this,(function(r){switch(r.label){case 0:n=a.token,i=void 0===n?"":n,u=a.appkey,s=a.useHttp,c=i.split("@"),d=c[1],l=s?"http":"https",p=d?d.split(";").map((function(e){return/^https?:/.test(e)?e:l+"://"+e})):[],t=o(o([],p),t),f=0,E=t.length,r.label=1;case 1:return f<E?(O=void 0,S=/^https?:/.test(t[f])?t[f]:l+"://"+t[f],"browser"===e.tag?[3,3]:(_=S+"/whiteboard/config.json",[4,e.httpReq({url:_,query:{appId:u,token:i.replace(/\+/g,"%2B"),callBack:""}})])):[3,7];case 2:return v=r.sent(),m=v.status,y=v.data,200!==m?[3,6]:(O=R(y)?JSON.parse(y):y,[3,5]);case 3:return[4,(C={url:S+"/whiteboard/config.js",funcName:"callBack",params:{appId:u,token:i}},new Promise((function(e,t){var n=C.url,r=C.timeout,o=void 0===r?6e3:r,a=C.funcName,i=C.params;a||t(new Error("funcName must exist!")),window[a]=function(t){R(),e(t)};var u=null!=i?Object.keys(i).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])})).join("&")+"&":"",s=document.createElement("script"),c=null;function R(){s.parentNode&&s.parentNode.removeChild(s),window[a]={},c&&clearTimeout(c)}o&&(c=setTimeout((function(){R(),e(h.RC_HTTP_REQ_TIMEOUT)}),o)),s.src=n+(n.indexOf("?")>-1?"&":"?")+u+"callBack="+a;var d=document.getElementsByTagName("script")[0]||document.head;null!=d.parentNode&&d.parentNode.insertBefore(s,d)})))];case 4:if(g=r.sent(),T=g.code,I=g.iwbConferenceUri,N=g.iwbLeaseUri,200!==T)return[3,6];O={iwbConferenceUri:I,iwbLeaseUri:N},r.label=5;case 5:return[2,O];case 6:return f+=1,[3,1];case 7:return[2,null]}var C}))}))}var q=function(e,o){return n(void 0,void 0,void 0,(function(){var n,i,u,c,d,l,p,f,O,S,_,v,m,g,T,I,N,C,w,b,A,P,L,k,M;return r(this,(function(r){switch(r.label){case 0:return i=(n=o||{}).minutes,u=n.nickName,c=n.id,d=n.token,l=n.appkey,p=n.playHubId,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["minutes","nickName","id","token","appkey","playHubId"]),a.token||(a.token=d),O=a.token,S=a.appkey,_=a.navigators,v=a.id,m=a.nickName,!O||!S||!v&&!c||!p||i&&(i<0||i>1e5)?[2,{code:h.PLAY_RECORD_OPERATE_ERROR}]:[4,j(e,S,_)];case 1:return(g=r.sent()).code!==h.SUCCESS?[2,Promise.reject({code:h.NAVI_RESOURCE_ERROR})]:(T=g.naviInfo,I=null==T?void 0:T.iwbConferenceUri,N=null==T?void 0:T.iwbLeaseUri,C=t(t({outTradeNo:s(10),serverId:"",activeSeconds:180,minutes:1440},f),{user:{role:y.RECORD,uid:c||v||s(5),name:u||m||"白板"+s(2)}}),w={"RC-Token":d||O,"RC-AppKey":l||S},b=E(N+"/api/v1/iwb/player"),[4,e.httpReq({url:b,method:"POST",headers:w,body:JSON.stringify(C)})]);case 2:return(A=r.sent().data)?(P=R(A)?JSON.parse(A):A,L=P.key,(k=P.code)===h.LESSHOLDER_SUCCESS?(M=E(I+"/conference/index.html?key="+L+"&iwbLeaseUri="+N),[2,{code:h.SUCCESS,url:M}]):k&&U[k]?[2,{code:k}]:[2,{code:h.PLAY_RECORD_ERROR}]):[2,{code:h.PLAY_RECORD_ERROR}]}}))}))},D=function(e){return n(void 0,void 0,void 0,(function(){var t,n,o,i,u,s,c,d,l,p,f,E,O;return r(this,(function(r){switch(r.label){case 0:return t=a.iwbLeaseUri,n=a.token,o=a.appkey,i=a.useHttp,u=a.id,s=a.hubId,o?u&&s?(c=i?"http":"https",d=/^https?:/.test(t)?t:c+"://"+t,l=d+"/iwb/hubs/"+s+"/users/"+u,p={"RC-Token":n,"RC-AppKey":o},[4,e.httpReq({url:l,method:"DELETE",headers:p})]):[2,{code:h.QUIT_ROOM_OPERATE_ERROR}]:[2,{code:h.NOT_INIT}];case 1:return f=r.sent(),E=f.status,O=f.data,E===h.SUCCESS&&O?(R(O)?JSON.parse(O):O).code===h.LESSHOLDER_SUCCESS?[2,{code:h.SUCCESS,msg:"房间关闭成功"}]:[2,h.QUIT_ROOM_ERROR]:[2,b.QUIT_ROOM_ERROR]}}))}))},J=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return my[e].apply(my,t)}catch(e){console.error(e)}}},K={setItem:J("setStorageSync"),getItem:J("getStorageSync"),removeItem:J("removeStorageSync"),clear:J("clearStorageSync")},x={tag:"alipay",httpReq:function(e){var t=e.method||g.GET,n=e.timeout||6e4,r=e.headers,o=e.query,a=e.body,i=u(e.url,o);return new Promise((function(e){my.request({url:i,method:t,headers:r,timeout:n,data:a,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:h.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:K,sessionStorage:K,useNavi:!0},V=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return swan[e].apply(swan,t)}catch(e){console.error(e)}}},Y={setItem:V("setStorageSync"),getItem:V("getStorageSync"),removeItem:V("removeStorageSync"),clear:V("clearStorageSync")},Q={tag:"baidu",useNavi:!0,localStorage:Y,sessionStorage:Y,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},r={data:JSON.stringify(n),status:e.statusCode};t(r)},fail:function(e){console.log("调用失败",e.errorCode),n({data:e.errorCode})}})}))}};var G,W={tag:"browser",httpReq:function(e){var t=e.method||g.GET,n=e.timeout||6e4,r=e.headers,o=e.query,a=e.body,i=u(e.url,o);return new Promise((function(e){var o,u=(o="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,"undefined"!=typeof XMLHttpRequest&&o?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")),s="[object XDomainRequest]"===Object.prototype.toString.call(u);if(u.open(t,i),r&&u.setRequestHeader)for(var c in r)u.setRequestHeader(c,r[c]);if(s){u.timeout=n,u.onload=function(){e({data:u.responseText,status:u.status||200})},u.onerror=function(){e({status:u.status||0})},u.ontimeout=function(){e({status:u.status||0})};var R="object"==typeof a?JSON.stringify(a):a;u.send(R)}else u.onreadystatechange=function(){4===u.readyState&&e({data:u.responseText,status:u.status})},u.onerror=function(){e({status:u.status||0})},setTimeout((function(){return e({status:u.status||0})}),n),u.send(a)}))},localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage,useNavi:!0},X=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return tt[e].apply(tt,t)}catch(e){console.error(e)}}},F={setItem:X("setStorageSync"),getItem:X("getStorageSync"),removeItem:X("removeStorageSync"),clear:X("clearStorageSync")},$={tag:"toutiao",useNavi:!1,localStorage:F,sessionStorage:F,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},r={data:JSON.stringify(n),status:e.statusCode};t(r)},fail:function(e){console.log("调用失败",e.errMsg),n({data:e.errMsg})}})}))}},Z=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return wx[e].apply(wx,t)}catch(e){console.error(e)}}},z={setItem:Z("setStorageSync"),getItem:Z("getStorageSync"),removeItem:Z("removeStorageSync"),clear:Z("clearStorageSync")},ee={tag:"wechat",httpReq:function(e){var t=e.method||g.GET,n=e.timeout||6e4,r=e.headers,o=e.query,a=e.body,i=u(e.url,o);return new Promise((function(e){wx.request({url:i,method:t,header:r,timeout:n,data:a,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:h.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:z,sessionStorage:z,useNavi:!0},te=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return uni[e].apply(uni,t)}catch(e){console.error(e)}}},ne={setItem:te("setStorageSync"),getItem:te("getStorageSync"),removeItem:te("removeStorageSync"),clear:te("clearStorageSync")},re={tag:"uniapp",httpReq:function(e){var t=e.method||g.GET,n=e.timeout||6e4,r=e.headers,o=e.query,a=e.body,i=u(e.url,o);return new Promise((function(e){uni.request({url:i,method:t,headers:r,timeout:n,data:a,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:h.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:ne,sessionStorage:ne,useNavi:!0},oe="undefined"!=typeof uni&&p(uni)?function(){switch(process.env.VUE_APP_PLATFORM){case"app-plus":return re;case"mp-baidu":return Q;case"mp-toutiao":return $;case"mp-alipay":return x;case"mp-weixin":return ee;case"h5":default:return W}}():"undefined"!=typeof wx&&p(wx)?ee:"undefined"!=typeof my&&p(my)?x:"undefined"!=typeof tt&&p(tt)?$:"undefined"!=typeof swan&&p(swan)?Q:W,ae=function(){function e(){this.runtime=oe}return e.prototype.joinRoom=function(e){return n(this,void 0,void 0,(function(){var t,n,o,i,u,s,c,R,d,p,E,O,S,v;return r(this,(function(r){switch(r.label){case 0:if(C("token",e.token,l.STRING),!a.appkey)return[2,A[h.NOT_INIT]];if(_(e))for(E in t=e)"navigators"!==E&&"appkey"!==E&&(a[E]=t[E]);return n=a.navigators,o=a.appkey,i=a.useHttp,[4,j(this.runtime,o,n)];case 1:return(u=r.sent()).code!==h.SUCCESS?[2,Promise.reject(A[u.code])]:(s=u.naviInfo,c=null==s?void 0:s.iwbConferenceUri,R=null==s?void 0:s.iwbLeaseUri,a.iwbConferenceUri=c,a.iwbLeaseUri=R,[4,H(this.runtime,a)]);case 2:return(d=r.sent()).code===h.SUCCESS?(p=d.keyInfo,E=null==p?void 0:p.key,O=i?"http":"https",S=m(c)?c:O+"://"+c,v=S+"/conference/index.html?key="+E+"&iwbLeaseUri="+a.iwbLeaseUri,"browser"!==this.runtime.tag?[2,v]:[2,f(v)]):[2,Promise.reject(A[d.code])]}}))}))},e.prototype.destroyRoom=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,M(this.runtime,e)];case 1:return(t=n.sent()).code===h.SUCCESS?[2,t]:[2,Promise.reject(t)]}}))}))},e.prototype.quitRoom=function(){var e,t;return n(this,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:return[4,j(this.runtime,a.appkey,a.navigators)];case 1:return(n=r.sent()).code!==h.SUCCESS?[2,Promise.reject(A[n.code])]:(a.iwbConferenceUri=null===(e=n.naviInfo)||void 0===e?void 0:e.iwbConferenceUri,a.iwbLeaseUri=null===(t=n.naviInfo)||void 0===t?void 0:t.iwbLeaseUri,[4,D(this.runtime)]);case 2:return(o=r.sent()).code===h.SUCCESS?[2,o]:[2,Promise.reject(A[o.code])]}}))}))},e.prototype.playRecord=function(e){return n(this,void 0,void 0,(function(){var t,n,o;return r(this,(function(r){switch(r.label){case 0:return[4,q(this.runtime,e)];case 1:return t=r.sent(),n=t.url,(o=t.code)===h.SUCCESS&&n?"browser"!==this.runtime.tag?[2,n]:[2,f(n)]:[2,Promise.reject(A[o])]}}))}))},e.prototype.watch=function(e){!function(e){var t,n,r,o=e.message;t=window,n="message",r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&e.length>0){var n=(window.event||e[0]).data;if(!R(n))return;var r=JSON.parse(n)||{};if(!r.method)return;o&&o(r)}},t.addEventListener&&t.addEventListener(n,r,!1),t.attachEvent&&t.attachEvent("on"+n,(function(){r.call(t)}))}(e)},e}();exports.init=function(e){var t;if(void 0===e&&(e=a),G)return G;C("appkey",e.appkey,l.STRING),C("options.navigators",e.navigators,(function(e){return S(e)&&(0===e.length||e.every(m))})),a.appkey=e.appkey,e.useHttp&&(a.useHttp=!!e.useHttp);var n=e.navigators,r=void 0===n?[]:n;return r=(r=r.filter((function(e){return/^https?:\/\//.test(e)}))).map((function(e){return e.replace(/\/$/g,"")})),S(r)&&(0===r.length||r.every(m))&&(a.navigators=r),0===a.navigators.length&&(t=a.navigators).push.apply(t,i),G=new ae};

}, function(modId) {var map = {}; return __REQUIRE__(map[modId], modId); })
return __REQUIRE__(1637044131431);
})()
//miniprogram-npm-outsideDeps=[]
//# sourceMappingURL=index.js.map